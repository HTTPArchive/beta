{% extends "base.html" %}


{% block title %}HTTP Archive | {{ metric }} | May 15, 2017{% endblock %}

{% block head %}
	{{ super() }}
	<style>
	table {
		border-collapse: collapse;
		width: 100%;
	}

	td {
  		padding: 0 5px;
	}

	.volume {
		display: flex;
		align-items: center;
		position: relative;
		min-width: 300px;
	}

	.volume div {
		position: absolute;
		z-index: -1;
		left: 0;
		height: 100%;
		border: 1px solid #666;
		background-color: #eee;
		border-top: none;
		opacity: 0.5;
	}

	.volume div.desktop {
		background-color: #04c7fd;
		border-color: #12aef8;
	}

	.volume div.mobile {
		background-color: #a62aa4;
		border-color: #842486;
	}

	#logo {
		height: 100px;
	}
	</style>
{% endblock %}

{% block content %}
	<img id="logo" src="/static/img/ha.png"/>

	<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
	<table id="table"></table>

	<script src="https://code.highcharts.com/stock/highstock.js"></script>
	<script src="https://code.highcharts.com/stock/highcharts-more.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
	<script src="/static/js/timeseries.js"></script>
	<script>
const bytesJsUrl = '/static/json/bytesJsTimeseries.json';
fetch(bytesJsUrl)
	.then(response => response.text())
	.then(nljson => `[${nljson.replace(/\n/g, ',')}]`.replace(',]', ']'))
	.then(jsonStr => JSON.parse(jsonStr))
	.then(data => data.sort((a, b) => a.date < b.date ? -1 : 1))
	.then(data => {
		drawTimeseries(data, 'container');
		drawTimeseriesTable(data, 'table');
	});
	</script>
{% endblock %}
